<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Imposter Game</title>

<style>
body {
  margin: 0;
  background: #0b0e1a;
  color: white;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto;
  text-align: center;
}
.screen {
  display: none;
  min-height: 100vh;
  padding: 20px;
}
.active { display: block; }
.card {
  background: #161a33;
  border-radius: 16px;
  padding: 20px;
  max-width: 400px;
  margin: auto;
}
button, select, input {
  width: 100%;
  padding: 14px;
  margin-top: 12px;
  font-size: 16px;
  border-radius: 12px;
  border: none;
}
button {
  background: #6c7cff;
  color: white;
}
.lock {
  font-size: 22px;
  letter-spacing: 4px;
}
</style>
</head>

<body>

<div id="setup" class="screen active">
  <div class="card">
    <h1>IMPOSTER</h1>

    <input id="players" type="number" min="3" max="10" value="5">
    
    <select id="imposters">
      <option value="1">1 Imposter</option>
      <option value="2">2 Imposters</option>
    </select>

    <select id="category"></select>

    <button id="startBtn">Start Game</button>
  </div>
</div>

<div id="pass" class="screen">
  <div class="card">
    <h2 id="passText"></h2>
    <div class="lock">ðŸ”’ ðŸ”’ ðŸ”’</div>
    <button id="revealBtn">Reveal</button>
  </div>
</div>

<div id="reveal" class="screen">
  <div class="card">
    <h2 id="playerTitle"></h2>
    <h1 id="role"></h1>
    <h2 id="word"></h2>
    <button id="nextBtn">Hide & Pass</button>
  </div>
</div>

<div id="end" class="screen">
  <div class="card">
    <h1>Discuss & Vote</h1>
    <button onclick="location.reload()">New Game</button>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {

const categories = {
  "Football Players": ["Messi","Ronaldo","Mbappe","Haaland"],
  "Football 2": ["Panav Singh"],
  "Cities": ["Toronto","London","Paris","Tokyo"],
  "Countries": ["Canada","Brazil","France","Japan"],
  "Clash Royale": ["Mega Knight","Hog Rider","Pekka"],
  "Fun": ["Worst excuse","Biggest lie","Most overrated thing"]
};

const categorySelect = document.getElementById("category");
Object.keys(categories).forEach(c => {
  let o = document.createElement("option");
  o.value = c;
  o.textContent = c;
  categorySelect.appendChild(o);
});

let totalPlayers = 0;
let currentPlayer = 1;
let roles = [];
let word = "";

function show(id) {
  document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

document.getElementById("startBtn").onclick = () => {
  totalPlayers = +players.value;
  const imp = +imposters.value;

  if (imp >= totalPlayers) {
    alert("Too many imposters");
    return;
  }

  const list = categories[category.value];
  word = list[Math.floor(Math.random() * list.length)];

  roles = Array(totalPlayers).fill("Crewmate");
  let count = 0;
  while (count < imp) {
    let r = Math.floor(Math.random() * totalPlayers);
    if (roles[r] !== "Imposter") {
      roles[r] = "Imposter";
      count++;
    }
  }

  passText.textContent = "Pass to Player 1";
  show("pass");
};

document.getElementById("revealBtn").onclick = () => {
  playerTitle.textContent = "Player " + currentPlayer;
  const r = roles[currentPlayer - 1];
  role.textContent = r;
  word.textContent = r === "Imposter" ? "???" : word;
  show("reveal");
};

document.getElementById("nextBtn").onclick = () => {
  currentPlayer++;
  if (currentPlayer > totalPlayers) {
    show("end");
  } else {
    passText.textContent = "Pass to Player " + currentPlayer;
    show("pass");
  }
};

});
</script>

</body>
</html>
