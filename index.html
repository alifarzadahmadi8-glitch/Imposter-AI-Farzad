<script>
document.addEventListener("DOMContentLoaded", () => {

const categories = {
  "Soccer Players": [
    "Lionel Messi","Cristiano Ronaldo","Neymar","Mbappe","Haaland","De Bruyne","Salah","Modric","Benzema","Lewandowski",
    "Kane","Bellingham","Vinicius Jr","Rodri","Bernardo Silva","Griezmann","Dybala","Son","Mane","Mahrez",
    "Bruno Fernandes","Rashford","Saka","Foden","Pedri","Gavi","Musiala","Osimhen","Hakimi","Davies",
    "Van Dijk","Ruben Dias","Courtois","Neuer","Ter Stegen","Alisson","Ederson","Panav Singh 711","Sayed Amir Mohamd","Giroud",
    "Suarez","Cavani","Ibrahimovic","Pogba","Kante","Casemiro","Odegaard","Rice","Saliba","Martinelli"
  ],

  "Football 2": [
    "Panav Singh"
  ],

  "Famous Football Clubs": [
    "Real Madrid","Barcelona","Man United","Man City","Liverpool","Arsenal","Chelsea","Tottenham","Bayern","Dortmund",
    "PSG","Juventus","AC Milan","Inter Milan","Napoli","Roma","Atletico Madrid","Sevilla","Ajax","PSV",
    "Porto","Benfica","Sporting","Celtic","Rangers","Galatasaray","Fenerbahce","Besiktas","Al Hilal","Al Nassr",
    "Flamengo","Palmeiras","Boca Juniors","River Plate","Santos","Corinthians","Monterrey","Club America","LA Galaxy","Inter Miami",
    "Toronto FC","Vancouver Whitecaps","NYCFC","RB Leipzig","RB Salzburg","Atalanta","Lyon","Marseille","Fiorentina","West Ham"
  ],

  "Clash Royale Cards": [
    "Knight","Archers","Goblins","Giant","PEKKA","Wizard","Musketeer","Valkyrie","Mini PEKKA","Hog Rider",
    "Balloon","Baby Dragon","Inferno Dragon","Electro Dragon","Skeleton Army","Mega Knight","Royal Giant","Elite Barbarians",
    "Prince","Dark Prince","Bandit","Royal Ghost","Golden Knight","Skeleton King","Mighty Miner","Monk",
    "Firecracker","Sparky","Electro Wizard","Ice Wizard","Magic Archer","Mother Witch","Night Witch",
    "Rocket","Fireball","Lightning","Freeze","Poison","Tornado","Mirror"
  ],

  "Famous Cities": [
    "New York","Toronto","London","Paris","Berlin","Rome","Madrid","Barcelona","Dubai","Tokyo",
    "Seoul","Singapore","Istanbul","Cairo","Riyadh","Jeddah","Abu Dhabi","Mumbai","Karachi","Sydney"
  ],

  "Famous Countries": [
    "Canada","USA","Mexico","Brazil","Argentina","UK","France","Germany","Italy","Spain",
    "Portugal","Netherlands","Belgium","Japan","South Korea","India","Pakistan","Saudi Arabia","UAE","Australia"
  ]
};

/* Populate categories */
const categorySelect = document.getElementById("category");
Object.keys(categories).forEach(c => {
  const o = document.createElement("option");
  o.value = c;
  o.textContent = c;
  categorySelect.appendChild(o);
});

let totalPlayers = 0;
let roles = [];
let word = "";
let fakeWord = "";
let current = 1;

/* SCREEN SWITCH */
function show(id) {
  document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

/* START GAME */
window.startGame = function () {
  totalPlayers = +players.value;
  const imp = +imposters.value;
  if (imp >= totalPlayers) return alert("Too many imposters");

  const list = categories[category.value];
  word = list[Math.floor(Math.random() * list.length)];

  /* Troll Mode: fake word */
  do {
    fakeWord = list[Math.floor(Math.random() * list.length)];
  } while (fakeWord === word);

  roles = Array(totalPlayers).fill("Crewmate");
  let picked = [];
  while (picked.length < imp) {
    let r = Math.floor(Math.random() * totalPlayers);
    if (!picked.includes(r)) picked.push(r);
  }
  picked.forEach(i => roles[i] = "Imposter");

  current = 1;
  handoverText.textContent = "Pass to Player 1";
  show("handover");
};

/* REVEAL */
window.reveal = function () {
  playerTitle.textContent = "Player " + current;
  const r = roles[current - 1];
  role.textContent = r;

  if (r === "Imposter") {
    word.textContent = fakeWord;
    hint.textContent = "You have a DIFFERENT word. Act normal ðŸ˜ˆ";
  } else {
    word.textContent = word;
    hint.textContent = "Do NOT say the word";
  }

  show("reveal");
};

/* NEXT PLAYER */
window.nextPlayer = function () {
  current++;
  if (current > totalPlayers) {
    show("play");
  } else {
    handoverText.textContent = "Pass to Player " + current;
    show("handover");
  }
};

/* RESET */
window.resetGame = function () {
  current = 1;
  show("setup");
};

});
</script>
